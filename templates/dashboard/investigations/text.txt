@inv_views.route('/investigations/<ir_number>', methods=['POST', 'GET'])
def investigation_details(ir_number):
    """ Render Template With Investigation and its details """
    from app import Session
    db = Session()
    investigation = db.query(Investigations).filter_by(
        ir_number=ir_number).first()
    details = db.query(InvestigationsDetails).filter_by(
        investigation_id=investigation.id).order_by(
        desc(InvestigationsDetails.date_created_on)).first()
    if details is None:
        details = {}
        details['investigation_id'] = investigation.id
    html_due_date_string = investigation.to_datetime_string(investigation.due_date)
    investigation.due_date = html_due_date_string
    return render_template(
            'dashboard/investigations/investigations_details.html',
            investigations=investigation, details=details)

